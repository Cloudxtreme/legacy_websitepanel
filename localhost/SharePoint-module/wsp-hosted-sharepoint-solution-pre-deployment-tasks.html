<!DOCTYPE html> 
<html lang="en" class="static orchard-blogs"> 

<!-- Mirrored from localhost/SharePoint-module/wsp-hosted-sharepoint-solution-pre-deployment-tasks by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 12 Nov 2013 19:01:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head> 
    <meta charset="utf-8" />
    <title>WSP Hosted SharePoint Solution Pre-Deployment Tasks - WebsitePanel</title> 
    <link href="../Modules/Orchard.Localization/Styles/orchard-localization-base.css" rel="stylesheet" type="text/css" />
<link href="../Themes/WebsitePanel/Styles/Site.css" rel="stylesheet" type="text/css" />
<meta content="Orchard" name="generator" />
<link href="../modules/orchard.themes/Content/orchard.ico" rel="shortcut icon" type="image/x-icon" />
<link href="http://fonts.googleapis.com/css?family=Lobster&amp;subset=latin" rel="stylesheet" type="text/css" />
<script src="../Core/Shapes/scripts/html5.js" type="text/javascript"></script>

<link rel="alternate" type="application/rss+xml" title="SharePoint Module" href="../rss267a?containerid=134" />

<link rel="alternate" type="application/rss+xml" title="SharePoint Module - Comments" href="../rss5ffb?commentedoncontainer=134" />

    <script>(function(d){d.className="dyn"+d.className.substring(6,d.className.length);})(document.documentElement);</script> 
</head> 
<body>


<div class="split-4" id="layout-wrapper">
<header id="layout-header" class="group">
    <div id="header">
        <div class="zone zone-header"><h1 id="branding"><a href="../index.html" title="WebsitePanel"></a></h1>

<div id="search">
    <form action="http://localhost/search">
        <input type="text" name="q" />
        <input type="submit" id="search" value="Search" />
    </form>
</div></div>
    </div>
</header>
<div id="layout-navigation" class="group">
    <div class="zone zone-navigation"><nav>
    <ul class="menu menu-main">
        
        <li>    <a href="../index.html">Home</a>
</li><li>    <a href="../whatsnew.html">What&#39;s new?</a>
</li><li>    <a href="../license.html">License</a>
</li><li>    <a href="../downloads.html">Downloads</a>
</li><li>    <a href="../demo.html">Demo</a>
</li><li>    <a href="../documentation.html">Documentation</a>
</li><li>    <a href="../works-with.html">Works With</a>
</li><li>    <a href="../contact-us.html">Contact Us</a>
</li>
    </ul>
</nav></div>
</div>
<div id="layout-before-main" class="group">
    <div class="zone zone-before-main"><article class="widget-html-widget widget">
    <p><a href="../documentation.html">Documentation</a> &gt;&nbsp;<a href="index.html">SharePoint Module</a>&nbsp;</p>
</article></div>
</div>
<div id="layout-main-container">
<div id="layout-main" class="group">
    <div id="layout-content" class="group">
        <div id="content" class="group">
            <div class="zone zone-content"><article class="content-item blog-post">
    <header>
        <h1>WSP Hosted SharePoint Solution Pre-Deployment Tasks</h1>

        <div class="metadata">
            
        </div>
    </header>
    <div class="content-localization">
    <div class="content-localizations">
        <h4>Translations:</h4>
        <ul class="localizations"><li class="first last"><a href="wsp-hosted-sharepoint-solution-pre-deployment-tasks-tr-TR.html">tr-TR</a></li></ul>
    </div>
</div>
<h2>Assumptions</h2> <p>This document assumes that background infrastructure (Windows Servers, Active Directory, WSS, DNS, etc) is configured correctly and error-free. At a minimum Windows event logs, Support tools utilities (such as dcdiag and netdiag) now show critical errors. At a maximum - all services deployed according Microsoft guides, carefully documented, there are no errors and warnings exist at all.<br>WSS 3.0 is deployed according to "server farm" scenario in Active Directory environment.  <p>Examples in this article are for SSL protected SharePoint sites, used standard port (443). However it may be tuned to be not SSL protected and to non-standard port (such as 8080 or something). However we recommend to use only SSL protected SharePoint sites for security.  <p><a name="Section2"></a> <h2>General ideas</h2> <p>WSP Hosted SharePoint service creates host-named Site Collections on the top of SharePoint Web Application (we call it "Root Web Application"). The method allows you to host thousands of SharePoint sites on single server.<br>You create Root Web Application manually and then tune Hosted SharePoint service to use it. You can use more than one Root Web Application and Hosted SharePoint service - for example SSL and not SSL, or with wildcard certificate or without it. Something similar to Exchange Storage Groups / Databases and different Hosted Exchange services connected to it. However in most cases it is completely enough to have one SSL-protected Root Web Application.  <p><a name="Section3"></a> <h2>Creating root web application </h2> <p>On WSS front-end server you are going to manage with WSP open Administrative tools &gt; SharePoint 3.0 Central Administration &gt; Application Management &gt; Create or Extend Web Application &gt; Create a new Web application.&nbsp; <br><strong>Non-default settings</strong> that you may choose (all those settings are not mandatory, you can choose another settings according to your vision).  <p>- Description. Something meaningful. "Hosting Root - SSL" in our example<br>- Port. Any port you decide to use." 443" in our example (we are going to create SSL protected Web Application and use classic SSL port)  <p><img alt="image001.png" src="../Media/Images/dnp_hosted_sharepoint_solution_pre_deployment_tasks/image001.png" width="378" height="269"> <p>- Allow anonymous: Up to you. "Yes" in our example (it will not open anonymous access to all newly created Site Collections, but it will allow site owners to open anonymous access to their Site Collections if needed).<br>- Use Secure Sockets Layer (SSL). Up to you. "Yes" in our example (we suppose it will be used together with Hosted Exchange, so users will connect to SharePoint with e-mail/password combination the same as used to connect to Exchange mailboxes, so it should be secure).  <p><img alt="image003.png" src="../Media/Images/dnp_hosted_sharepoint_solution_pre_deployment_tasks/image003.png" width="378" height="238"> <p>- Application pool name. Up to you. "Hosting Root - SSL" in our example.<br>- Select a security account for this application pool. Up to you. "Predefined - Network Service" in our example. However you may decide to use separate account for security reasons.  <p><img alt="image005.png" src="../Media/Images/dnp_hosted_sharepoint_solution_pre_deployment_tasks/image005.png" width="354" height="320"> <p>- Select Windows SharePoint Services search server. The better to start and configure search before creating root Web Application and bind configured search server to it.  <p><img alt="image007.png" src="../Media/Images/dnp_hosted_sharepoint_solution_pre_deployment_tasks/image007.png" width="361" height="106"> <p><strong>Default settings that should not be changed.</strong> <p>- Authentication provider. Use "NTLM"; otherwise you more likely will have problems with search.  <p><img alt="image009.png" src="../Media/Images/dnp_hosted_sharepoint_solution_pre_deployment_tasks/image009.png" width="363" height="78"> <p>- Also please do not change another default setting if you have no reason.  <p><strong>Finalizing root Web Application creation</strong> <p>- Write down root Web Application URL (or simple copy-paste it from it's field). It will be used later for WSP settings.  <p><img alt="image011.png" src="../Media/Images/dnp_hosted_sharepoint_solution_pre_deployment_tasks/image011.png" width="356" height="170"><br>- Press "OK" and wait till Web Application creates.<br>- Run <strong><em>iisreset /noforce</em></strong> in command line.  <p><a name="Section4"></a> <h2>Securing root Web Application with SSL certificate</h2> <p>This step is optional, but highly recommended.  <p>- Go to IIS, root Web Application website and create certificate request. You can use any Common Name for this certificate because anyway your clients will create their Site Collections with different URLs that are not predictable. So they will get certificate- related errors/warnings in browsers anyway.  <p>- Get SSL certificate from CA. You may use your internal CA here to save money. While Site Collections URLs are not predictable users will get certificate- related errors/warnings in browsers even you purchase certificate from VeriSign.  <p>- Install certificate on root Web Application website.  <p>- Restrict root Web Application website clients to use only SSL. Open website properties &gt; Directory Security &gt; Secure communications &gt; Edit &gt; Require secure channel (SSL), Require 128-bit encryption.<br><img alt="image020.png" src="../Media/Images/dnp_hosted_sharepoint_solution_pre_deployment_tasks/image020.png" width="469" height="454"> <p>Note that there are some ways to avoid certificate- related errors/warnings in browsers.  <p>First you can create root Web Application for every customer, but this is not the case because of WSS is extremely recourse-intensive application and you can not run a lot of Web Applications on one server.  <p>Second you can purchase wildcard certificate (*.providerdomain.com) and have your customers to create Site Collections with URLs like client.providerdomain.com. However most of clients prefer to see et certificate- related errors/warnings in browsers and user URLs like team.client.com.  <p><a name="Section5"></a> <h2>Disabling AD browsing at root Web Application level</h2> <p>Restrict people picked so users will not be able to resolve another organization's users with SharePoint.  <p>Open command prompt, change directory to WSS BIN folder (C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\12\BIN by default) and run:<br><strong><em>stsadm -o setproperty -pn peoplepicker-onlysearchwithinsitecollection -url <a href="https://wspwssdemolab01/">https://wspwssdemolab01/</a> -pv yes</em></strong><br>Where "<strong><em>-url</em></strong>" is root Web Application URL, you wrote down previously, "https://wspwssdemolab01/" in our example. Port number is omitted in this URL because it is standard for https. Please do not forget to enter port number in URL in case you use non-standard (not 80 or 443) port.  <p>Check if property set correctly with "<strong><em>-o getproperty</em></strong>" stsadm swith. Here is an example:<br><strong><em>stsadm -o getproperty -pn peoplepicker-onlysearchwithinsitecollection -url <a href="https://wspwssdemolab01/">https://wspwssdemolab01/</a><br></em></strong>You should get:  <p>&lt;Property Exist="Yes" Value="yes" /&gt; <p><a name="Section6"></a> <h2>Deploy Hosted Organizations module</h2> <p>In case it is already deployed (for example - for HES) - skip this step.<br>In case it is still not deployed - <a href="../exchange-2007-2010-module/deploying-hosted-organizations-module.html">run steps described in this article</a>. You can deploy this module either on the same computer as WSS server or another domain server that has WSP Server installed on it. </p>
</article></div>
        </div>
    </div>
</div>
</div>
<div id="layout-footer" class="group">
    <footer id="footer">
        <div id="footer-quad" class="group">
            <div id="footer-quad-fourth">
                <div class="zone zone-footer-quad-fourth"><article class="widget-html-widget widget">
    <center><span style="font-family: arial;" face="arial"><a href="../index.html">Home</a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="../license.html">License</a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="../whatsnew.html">What's new?</a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="../contact-us.html">Contact Us</a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="../privacy-policy/privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="../terms-of-use/terms-of-use.html">Terms of Use</a> </span></center>
</article></div>
            </div>
        </div>
        <div id="footer-sig" class="group">
            <div class="zone zone-footer">    <div class="credits"><span class="poweredby">Powered by <a href="http://www.orchardproject.net/" target="_blank">Orchard</a></span> <span class="copyright">&#169; 2011 Outercurve Foundation</span></div>
<div class="user-display">
        <span class="user-actions"><a href="../Users/Account/LogOn7c61-2.html?ReturnUrl=%2FSharePoint-module%2Fwsp-hosted-sharepoint-solution-pre-deployment-tasks">Sign In</a></span>
</div></div>
        </div>
    </footer>
</div>
</div>

</body>

<!-- Mirrored from localhost/SharePoint-module/wsp-hosted-sharepoint-solution-pre-deployment-tasks by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 12 Nov 2013 19:01:13 GMT -->
</html>